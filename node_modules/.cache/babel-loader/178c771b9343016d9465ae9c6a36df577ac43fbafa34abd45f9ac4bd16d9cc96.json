{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { collection, onSnapshot } from 'firebase/firestore';\nimport { db } from '@/firebase';\nexport default {\n  __name: 'UmfragenÜbersichtUser',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const umfragenCollectionRef = collection(db, 'AlleUmfragen');\n    const admins = ref([]);\n    const umfragen = ref([]);\n    const hilfeAdmins = ref([]);\n    const searchQuery = ref('');\n    onMounted(() => {\n      onSnapshot(umfragenCollectionRef, querySnapshot => {\n        const allAdmins = [];\n        const allSurveys = [];\n        querySnapshot.forEach(doc => {\n          console.log(\"All Aminds \" + doc.id);\n          allAdmins.push(doc.id);\n          console.log(\"allAdmins\" + allAdmins);\n        });\n        admins.value = allAdmins;\n        console.log(\"Admins.value \" + admins.value);\n        admins.value.forEach((admin, index) => {\n          const adminCollectionRef = collection(db, 'AlleUmfragen', admin, 'Umfragen');\n          console.log(\"Admincollectionref \" + adminCollectionRef);\n          onSnapshot(adminCollectionRef, querySnapshot => {\n            const surveys = [];\n            const helper = [];\n            querySnapshot.forEach(doc => {\n              surveys.push(doc.id);\n              helper.push(admin);\n            });\n            hilfeAdmins.value[index] = helper;\n            umfragen.value[index] = surveys;\n            console.log(\"Hilfe Admins: \" + hilfeAdmins.value);\n            console.log(\"umfragen.value: \" + umfragen.value);\n            console.log(\"Admins: \" + admins.value);\n          });\n        });\n      });\n    });\n    const filteredUmfragen = computed(() => {\n      const query = searchQuery.value.toLowerCase();\n      if (query === '') {\n        return umfragen.value;\n      } else {\n        return umfragen.value.map(umfragenarray => {\n          return umfragenarray.filter(umfrage => {\n            return umfrage.toLowerCase().includes(query);\n          });\n        });\n      }\n    });\n    const writeToSessionStorage = (umfrage, admin) => {\n      sessionStorage.setItem('umfrageBeantworten', umfrage);\n      sessionStorage.setItem('adminBeantworten', admin);\n    };\n    const __returned__ = {\n      umfragenCollectionRef,\n      admins,\n      umfragen,\n      hilfeAdmins,\n      searchQuery,\n      filteredUmfragen,\n      writeToSessionStorage,\n      ref,\n      computed,\n      onMounted,\n      get collection() {\n        return collection;\n      },\n      get onSnapshot() {\n        return onSnapshot;\n      },\n      get db() {\n        return db;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","collection","onSnapshot","db","umfragenCollectionRef","admins","umfragen","hilfeAdmins","searchQuery","querySnapshot","allAdmins","allSurveys","forEach","doc","console","log","id","push","value","admin","index","adminCollectionRef","surveys","helper","filteredUmfragen","query","toLowerCase","map","umfragenarray","filter","umfrage","includes","writeToSessionStorage","sessionStorage","setItem"],"sources":["/Users/aleks/Desktop/Git-Projects/Project-2/src/views/UmfragenÜbersichtUser.vue"],"sourcesContent":["<template>\n    <div class=\"view-main-content\">\n      <h1 class=\"view-main-content-heading\">Übersicht aller Umfragen</h1>\n      <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Umfragen durchsuchen\" class=\"view-main-content-textfield\">\n      <div v-for=\"(umfragenarray, index) in filteredUmfragen\" :key=\"index\">\n        <div v-for=\"(umfrage) in umfragenarray\" >\n          <button @click=\"writeToSessionStorage(umfrage, hilfeAdmins[index][0]), this.$router.push('/beantworten')\">\n            {{ umfrage }} - {{ hilfeAdmins[index][0]}}\n          </button>\n        </div>\n      </div>\n    </div>\n  </template>\n\n  <style scoped>\n    button {\n      color: var(--text_dark_background);\n      font-weight: bold;\n      background: transparent;\n      border: 3px solid var(--text_dark_background);\n      cursor: pointer;\n      margin-bottom: 1em;\n      padding: .7rem 1rem;\n      border-radius: 10px;\n      transition: 500ms;\n    }\n\n    button:hover {\n      transform: scale(1.02);\n      transition: 300ms;\n      color: var(--polly_accent_yellow);\n    }\n\n\n  </style>\n  \n  <script setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { collection, onSnapshot } from 'firebase/firestore'\n  import { db } from '@/firebase'\n  \n  const umfragenCollectionRef = collection(db,'AlleUmfragen')\n  const admins = ref([])\n  const umfragen = ref([])\n  const hilfeAdmins = ref([])\n  const searchQuery = ref('')\n  \n  onMounted(() => {\n    onSnapshot(umfragenCollectionRef, (querySnapshot) => {\n      const allAdmins = []\n      const allSurveys = []\n      querySnapshot.forEach((doc) => {\n        console.log(\"All Aminds \" + doc.id)\n        allAdmins.push(doc.id)\n        console.log(\"allAdmins\" + allAdmins)\n      })\n      admins.value = allAdmins\n      console.log(\"Admins.value \" + admins.value)\n      admins.value.forEach((admin, index) => {\n        const adminCollectionRef = collection(db, 'AlleUmfragen', admin, 'Umfragen')\n        console.log(\"Admincollectionref \" + adminCollectionRef)\n        onSnapshot(adminCollectionRef, (querySnapshot) => {\n          const surveys = []\n          const helper = []\n          querySnapshot.forEach((doc) => {\n            surveys.push(doc.id)\n            helper.push(admin)\n          })\n          hilfeAdmins.value[index] = helper\n          umfragen.value[index] = surveys\n          console.log(\"Hilfe Admins: \" + hilfeAdmins.value)\n          console.log(\"umfragen.value: \" + umfragen.value)\n          console.log(\"Admins: \" + admins.value)\n        })\n      })\n    })\n  })\n  \n  const filteredUmfragen = computed(() => {\n    const query = searchQuery.value.toLowerCase()\n    if (query === '') {\n      return umfragen.value\n    } else {\n      return umfragen.value.map((umfragenarray) => {\n        return umfragenarray.filter((umfrage) => {\n          return umfrage.toLowerCase().includes(query)\n        })\n      })\n    }\n  })\n  \n  const writeToSessionStorage = (umfrage, admin) => {\n    sessionStorage.setItem('umfrageBeantworten', umfrage);\n    sessionStorage.setItem('adminBeantworten', admin);\n  }\n  \n  </script>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}