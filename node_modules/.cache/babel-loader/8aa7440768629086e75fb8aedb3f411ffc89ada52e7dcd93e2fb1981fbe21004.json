{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Übersicht aller Umfragen\", -1 /* HOISTED */);\nconst _hoisted_2 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n    placeholder: \"Umfrage suchen\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchQuery]]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredUmfragen, (umfragenarray, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(umfragenarray, umfrage => {\n      return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"button\", {\n        onClick: $event => ($setup.writeToSessionStorage(umfrage, $setup.hilfeAdmins[index][0]), this.$router.push('/beantworten'))\n      }, _toDisplayString(umfrage) + \" - \" + _toDisplayString($setup.hilfeAdmins[index][0]), 9 /* TEXT, PROPS */, _hoisted_2)]);\n    }), 256 /* UNKEYED_FRAGMENT */))]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_hoisted_1","type","$setup","searchQuery","$event","placeholder","_Fragment","_renderList","filteredUmfragen","umfragenarray","index","key","umfrage","onClick","writeToSessionStorage","hilfeAdmins","$router","push","_toDisplayString","_hoisted_2"],"sources":["/Users/aleks/Desktop/Git-Projects/Project-2/src/views/UmfragenÜbersichtUser.vue"],"sourcesContent":["<template>\n    <div>\n      <h1>Übersicht aller Umfragen</h1>\n      <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Umfrage suchen\">\n      <div v-for=\"(umfragenarray, index) in filteredUmfragen\" :key=\"index\">\n        <div v-for=\"(umfrage) in umfragenarray\" >\n          <button @click=\"writeToSessionStorage(umfrage, hilfeAdmins[index][0]), this.$router.push('/beantworten')\">\n            {{ umfrage }} - {{ hilfeAdmins[index][0]}}\n          </button>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { collection, onSnapshot } from 'firebase/firestore'\n  import { db } from '@/firebase'\n  \n  const umfragenCollectionRef = collection(db,'AlleUmfragen')\n  const admins = ref([])\n  const umfragen = ref([])\n  const hilfeAdmins = ref([])\n  const searchQuery = ref('')\n  \n  onMounted(() => {\n    onSnapshot(umfragenCollectionRef, (querySnapshot) => {\n      const allAdmins = []\n      const allSurveys = []\n      querySnapshot.forEach((doc) => {\n        console.log(\"All Aminds \" + doc.id)\n        allAdmins.push(doc.id)\n        console.log(\"allAdmins\" + allAdmins)\n      })\n      admins.value = allAdmins\n      console.log(\"Admins.value \" + admins.value)\n      admins.value.forEach((admin, index) => {\n        const adminCollectionRef = collection(db, 'AlleUmfragen', admin, 'Umfragen')\n        console.log(\"Admincollectionref \" + adminCollectionRef)\n        onSnapshot(adminCollectionRef, (querySnapshot) => {\n          const surveys = []\n          const helper = []\n          querySnapshot.forEach((doc) => {\n            surveys.push(doc.id)\n            helper.push(admin)\n          })\n          hilfeAdmins.value[index] = helper\n          umfragen.value[index] = surveys\n          console.log(\"Hilfe Admins: \" + hilfeAdmins.value)\n          console.log(\"umfragen.value: \" + umfragen.value)\n          console.log(\"Admins: \" + admins.value)\n        })\n      })\n    })\n  })\n  \n  const filteredUmfragen = computed(() => {\n    const query = searchQuery.value.toLowerCase()\n    if (query === '') {\n      return umfragen.value\n    } else {\n      return umfragen.value.map((umfragenarray) => {\n        return umfragenarray.filter((umfrage) => {\n          return umfrage.toLowerCase().includes(query)\n        })\n      })\n    }\n  })\n  \n  const writeToSessionStorage = (umfrage, admin) => {\n    sessionStorage.setItem('umfrageBeantworten', umfrage);\n    sessionStorage.setItem('adminBeantworten', admin);\n  }\n  \n  </script>\n  "],"mappings":";;gCAEMA,mBAAA,CAAiC,YAA7B,0BAAwB;;;uBAD9BC,mBAAA,CAUM,cATJC,UAAiC,E,gBACjCF,mBAAA,CAAsE;IAA/DG,IAAI,EAAC,MAAM;+DAAUC,MAAA,CAAAC,WAAW,GAAAC,MAAA;IAAEC,WAAW,EAAC;iDAAzBH,MAAA,CAAAC,WAAW,E,sBACvCJ,mBAAA,CAMMO,SAAA,QAAAC,WAAA,CANgCL,MAAA,CAAAM,gBAAgB,GAAzCC,aAAa,EAAEC,KAAK;yBAAjCX,mBAAA,CAMM;MANmDY,GAAG,EAAED;IAAK,K,kBACjEX,mBAAA,CAIMO,SAAA,QAAAC,WAAA,CAJmBE,aAAa,EAAzBG,OAAO;2BAApBb,mBAAA,CAIM,cAHJD,mBAAA,CAES;QAFAe,OAAK,EAAAT,MAAA,KAAEF,MAAA,CAAAY,qBAAqB,CAACF,OAAO,EAAEV,MAAA,CAAAa,WAAW,CAACL,KAAK,YAAYM,OAAO,CAACC,IAAI;0BACnFL,OAAO,IAAG,KAAG,GAAAM,gBAAA,CAAGhB,MAAA,CAAAa,WAAW,CAACL,KAAK,4BAAAS,UAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}