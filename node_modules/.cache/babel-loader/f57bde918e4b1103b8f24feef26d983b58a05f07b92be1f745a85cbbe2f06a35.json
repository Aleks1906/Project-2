{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Übersicht aller Umfragen\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  id: \"alleUmfragen\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    id: \"umfrage\",\n    onClick: _cache[0] || (_cache[0] = $event => this.$router.push('/beantworten'))\n  })]), _createCommentVNode(\"\\n    <div v-for=\\\"umfragenarray in umfragen\\\">\\n        <div v-for=\\\"umfrage in umfragenarray\\\">\\n            {{ umfrage }}\\n        </div>\\n    </div>\\n\")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","id","_hoisted_1","_hoisted_2","onClick","_cache","$event","$router","push","_createCommentVNode"],"sources":["/Users/aleks/Desktop/Git-Projects/Project-2/src/views/UmfragenÜbersichtUser.vue"],"sourcesContent":["<template>\n    <h1>Übersicht aller Umfragen</h1>\n\n    <div id=\"alleUmfragen\">\n        <div id=\"umfrage\" @click=\"this.$router.push('/beantworten')\"></div>\n    </div>\n    <!--\n    <div v-for=\"umfragenarray in umfragen\">\n        <div v-for=\"umfrage in umfragenarray\">\n            {{ umfrage }}\n        </div>\n    </div>\n-->\n\n</template>\n\n<script setup>\n    import { ref, computed, onMounted, resolveDirective } from 'vue'\n    import {collection, onSnapshot, doc, updateDoc, FieldValue, arrayUnion, getFirestore} from 'firebase/firestore';\n    import { db } from '@/firebase'\n \n    const umfragenCollectionRef = collection(db,'AlleUmfragen')\n    const admins = ref([])\n    let umfragen = ref([])\n    //let umfragenLength = 0\n\n    onMounted(() => {\n        onSnapshot(umfragenCollectionRef, (querySnapshot) => {\n            const allAdmins = []\n            querySnapshot.forEach((doc) => {\n                \n                console.log(\"All Aminds \" + doc.id)\n                allAdmins.push(doc.id)\n                console.log( \"allAdmins\" + allAdmins)\n            })\n            admins.value = allAdmins\n            console.log(\"Admins.value \" + admins.value)\n            admins.value.forEach((admin) => {\n                const allSurveys = []\n                const adminCollectionRef = collection(db, 'AlleUmfragen', admin, 'Umfragen')\n                console.log(\"Admincollectionref \" + adminCollectionRef)\n                onSnapshot(adminCollectionRef, (querySnapshot) => {\n                    querySnapshot.forEach((doc) => {\n                        allSurveys.push(doc.id)\n                        \n                    })\n                    console.log(allSurveys)\n                    umfragen.value.push(allSurveys)\n                    document.getElementById('alleUmfragen').innerHTML = ''\n                    \n                    for(let i = 0; i < umfragen.value.length; i++){\n                        console.log('Umfragenvalue ' + umfragen.value[i])\n                        for(let j = 0; j < umfragen.value[i].length; j++){\n                            console.log('Umfrage ' + umfragen.value[i][j])\n                            let umfrage = umfragen.value[i][j]\n                            document.getElementById('alleUmfragen').innerHTML +=  umfrage \n                        }\n                    }\n                    // for (const umfragen_ in umfragen.value) {\n                    //     console.log('Umfragen_ ' + umfragen_.toString())\n                    //     for(const umfrage in umfragen_){\n                    //         console.log(\"Umfrage \" + umfrage)\n                    //         document.getElementById('alleUmfragen').innerHTML = '<button>' + umfrage + '</button>'\n                    //     }\n                    // }\n                    console.log(umfragen.value.length)\n                    // if(umfragen.value.length > 0){\n                    //     console.log(\"Passiert hier was?\")\n                    //     location.reload()\n                    // }\n                })\n                umfragen.value = []\n                //umfragenLength = umfragen.value.length\n            })\n            console.log(\"Umfragen.value.length \" + umfragen.value[0])\n            \n        })\n    })\n</script>"],"mappings":";;gCACIA,mBAAA,CAAiC,YAA7B,0BAAwB;;EAEvBC,EAAE,EAAC;AAAc;;6DAFtBC,UAAiC,EAEjCF,mBAAA,CAEM,OAFNG,UAEM,GADFH,mBAAA,CAAmE;IAA9DC,EAAE,EAAC,SAAS;IAAEG,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,SAAOC,OAAO,CAACC,IAAI;QAE/CC,mBAAA,8JAMD,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}