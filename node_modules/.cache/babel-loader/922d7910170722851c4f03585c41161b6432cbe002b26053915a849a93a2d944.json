{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Übersicht aller Umfragen\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.umfragen, umfrage => {\n    return _openBlock(), _createElementBlock(\"div\", null, _toDisplayString(umfrage), 1 /* TEXT */);\n  }), 256 /* UNKEYED_FRAGMENT */))], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","_hoisted_1","_createElementBlock","_Fragment","_renderList","$setup","umfragen","umfrage","_toDisplayString"],"sources":["/Users/aleks/Desktop/Git-Projects/Project-2/src/views/UmfragenÜbersichtUser.vue"],"sourcesContent":["<template>\n    <h1>Übersicht aller Umfragen</h1>\n\n    <div v-for=\"umfrage in umfragen\">\n        {{ umfrage }}\n    </div>\n\n</template>\n\n<script setup>\n    import { ref, computed, onMounted, resolveDirective } from 'vue'\n    import {collection, onSnapshot, doc, updateDoc, FieldValue, arrayUnion, getFirestore} from 'firebase/firestore';\n  \n    import { db } from '@/firebase'\n \n    const umfragenCollectionRef = collection(db,'AlleUmfragen')\n\n    const umfrageNamen = ref([])\n\n    const admins = ref([])\n    const umfragen = ref([])\n\n    onMounted(() => {\n        //console.log(\"UmfragendollectionRef\" + umfragenCollectionRef.get())\n        onSnapshot(umfragenCollectionRef, (querySnapshot) => {\n            const allAdmins = []\n        // const fbQuestions = []\n            querySnapshot.forEach((doc) => {\n                \n                console.log(\"All Aminds \" + doc.id)\n                allAdmins.push(doc.id)\n                console.log( \"allAdmins\" + allAdmins)\n            //     const frage = {\n            //         id: doc.id,\n            //         options: doc.data().options,\n            //         question: doc.data().question,\n            //         selected: doc.data().selected,\n            //         selectedLocal: null\n            //     }\n            //     frage.selected.push(null)\n            //     fbQuestions.push(frage)\n            })\n            admins.value = allAdmins\n            const allSurveys = []\n            console.log(\"Admins.value \" + admins.value)\n            admins.forEach((admin) => {\n                const adminCollectionRef = collection(db, 'AlleUmfragen', admin, 'Umfragen')\n                console.log(\"Admincollectionref \" + adminCollectionRef)\n                onSnapshot(adminCollectionRef, (querySnapshot) => {\n                    querySnapshot.forEach((doc) => {\n                        allSurveys.push(doc.id)\n                    })\n                    umfragen.value = allSurveys\n                })\n            })\n        // questions.value = fbQuestions\n        })\n        // return allAdmins\n    })\n\n    // Zunächst muss die Collection AlleUmfragen aufgerufen werden -> erledigt\n    // dann daraus gibt es ja diverse user, die abgespeichert werden müssen -> erledigt\n    // für jeden user muss man alle Umfragen extrahieren und ausgeben\n\n    // onMounted(() => {\n    // umfragenCollectionRef.get().then((querySnapshot) => {\n    //     const namen = []\n    //     querySnapshot.forEach((doc) => {\n    //     const umfrageName = doc.data().name\n    //     namen.push(umfrageName)\n    //     })\n    //     umfrageNamen.value = namen\n    // })\n    // })\n</script>"],"mappings":";gCACIA,mBAAA,CAAiC,YAA7B,0BAAwB;;;6DAA5BC,UAAiC,G,kBAEjCC,mBAAA,CAEMC,SAAA,QAAAC,WAAA,CAFiBC,MAAA,CAAAC,QAAQ,EAAnBC,OAAO;yBAAnBL,mBAAA,CAEM,aAAAM,gBAAA,CADCD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}